/*! jtb.js v0.5.0 Build 2016-03-22T09:35:46.506Z | (C) 2016 tieba.baidu.com */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return e?setImmediate(a):setTimeout(a)}Object.defineProperty(c,"__esModule",{value:!0}),c.asap=d;var e="function"==typeof setImmediate},{}],2:[function(a,b,c){"use strict";function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var e=a("./promise");!function(a){var b={TBHY_COMMON_Share:{share:{timeout:1e3}},TBHY_COMMON_Dialog:{alert:{},toast:{}},TBHY_COMMON_Clipboard:{copy:{}},TBHY_COMMON_Performance:{trackFPS:{}},TBHY_COMMON_UISwitch:{viewHideSwitch:{}}},c=new Error("Bridge not avaliable"),f=function(a){return a.replace(/^\w/,function(a){return a.toUpperCase()})},g=function(b){return isNaN(b)?b=5e3:500>b&&(b=500),new e.Promise(function(d,e){var f=!1,g=function(){a.TiebaJsBridge&&"complete"===a.TiebaJsBridge.readyState?d(a.TiebaJsBridge):e(c)};a.TiebaJsBridge?g():(a.document.addEventListener("TiebaJsBridgeReady",function(){f||g()},!1),setTimeout(function(){return(f=!0)&&g()},+b))})},h=function(a,b,c,d){return g(d).then(function(e){return e.call(a,b,c,d)},e.Promise.reject)},i=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return g().then(function(a){return a.register.apply(a,b)},e.Promise.reject)},j=function(a,b,c){return function(d){return h(a,b,d,c)}},k=function(a){return function(b){var c=[];for(var d in b)c[c.length]=d+"="+encodeURIComponent(b[d]);return h("TBHY_COMMON_Navigator","toNativePage",{url:"tieba://"+a.toLowerCase()+"?"+c.join("&")})}},l={ready:g,call:h,toNativePage:function(a,b){return h("TBHY_COMMON_Navigator","toNativePage",{url:a},b)},register:i,on:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];var e=b.slice();return e[3]=!1,i.apply(void 0,d(e))},system:{version:function(){return g().then(function(a){return a.system.version()},e.Promise.reject)},platform:function(){return g().then(function(a){return a.system.platform()},e.Promise.reject)}}};for(var m in b){var n=b[m];l[m]=l[m]||{};for(var o in n)l[m][o]=j(m,o,n[o].timeout)}var p=["frs","pb","person"];l.TBHY_COMMON_Navigator={},p.forEach(function(a){l.TBHY_COMMON_Navigator["to"+f(a)+"Page"]=k(a)}),a.tb=l}(window)},{"./promise":3}],3:[function(a,b,c){"use strict";function d(){}function e(a){try{return a.then}catch(b){return s=b,t}}function f(a,b){try{return a(b)}catch(c){return s=c,t}}function g(a,b,c){try{a(b,c)}catch(d){return s=d,t}}function h(a){if("object"!==q(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=0,this._value=null,this._deferreds=[],a!==d&&o(a,this)}function i(a,b,c){return new a.constructor(function(e,f){var g=new h(d);g.then(e,f),j(a,new n(b,c,g))})}function j(a,b){for(;3===a._state;)a=a._value;return 0===a._state?void a._deferreds.push(b):void(0,r.asap)(function(){var c=1===a._state?b.onFulfilled:b.onRejected;if(null===c)return void(1===a._state?k(b.promise,a._value):l(b.promise,a._value));var d=f(c,a._value);d===t?l(b.promise,s):k(b.promise,d)})}function k(a,b){if(b===a)return l(a,new TypeError("A promise cannot be resolved with itself."));if(b&&("object"===("undefined"==typeof b?"undefined":q(b))||"function"==typeof b)){var c=e(b);if(c===t)return l(a,s);if(c===a.then&&b instanceof h)return a._state=3,a._value=b,void m(a);if("function"==typeof c)return void o(c.bind(b),a)}a._state=1,a._value=b,m(a)}function l(a,b){a._state=2,a._value=b,m(a)}function m(a){for(var b=0;b<a._deferreds.length;b++)j(a,a._deferreds[b]);a._deferreds=null}function n(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function o(a,b){var c=!1,d=g(a,function(a){c||(c=!0,k(b,a))},function(a){c||(c=!0,l(b,a))});c||d!==t||(c=!0,l(b,s))}function p(a){var b=new h(h._noop);return b._state=1,b._value=a,b}var q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};Object.defineProperty(c,"__esModule",{value:!0}),c.Promise=h;var r=a("./asap"),s=null,t={};h._noop=d,h.prototype.then=function(a,b){if(this.constructor!==h)return i(this,a,b);var c=new h(d);return j(this,new n(a,b,c)),c},h.prototype["catch"]=function(a){return this.then(null,a)};var u=p(!0),v=p(!1),w=p(null),x=p(void 0),y=p(0),z=p("");h.resolve=function(a){if(a instanceof h)return a;if(null===a)return w;if(void 0===a)return x;if(a===!0)return u;if(a===!1)return v;if(0===a)return y;if(""===a)return z;if("object"===("undefined"==typeof a?"undefined":q(a))||"function"==typeof a)try{
var b=a.then;if("function"==typeof b)return new h(b.bind(a))}catch(c){return new h(function(a,b){b(c)})}return p(a)},h.all=function(a){var b=Array.prototype.slice.call(a);return new h(function(a,c){function d(f,g){if(g&&("object"===("undefined"==typeof g?"undefined":q(g))||"function"==typeof g)){if(g instanceof h&&g.then===h.prototype.then){for(;3===g._state;)g=g._value;return 1===g._state?d(f,g._value):(2===g._state&&c(g._value),void g.then(function(a){d(f,a)},c))}var i=g.then;if("function"==typeof i){var j=new h(i.bind(g));return void j.then(function(a){d(f,a)},c)}}b[f]=g,0===--e&&a(b)}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},h.reject=function(a){return new h(function(b,c){c(a)})},h.race=function(a){return new h(function(b,c){a.forEach(function(a){h.resolve(a).then(b,c)})})},h.prototype["catch"]=function(a){return this.then(null,a)}},{"./asap":1}]},{},[2]);